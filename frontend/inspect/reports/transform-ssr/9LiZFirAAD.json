{"resolvedId":"/home/edge/dev/js/private-cloud/src/routes/index.tsx?data","transforms":[{"name":"__load__","result":"import { useRouteData } from \"solid-start\";\nimport {\n  createServerAction$,\n  createServerData$,\n  redirect,\n} from \"solid-start/server\";\nimport { getUser, logout } from \"~/db/session\";\n\nexport function routeData() {\n  return createServerData$(async (_, { request }) => {\n    const user = await getUser(request);\n\n    if (!user) {\n      throw redirect(\"/login\");\n    }\n\n    return user;\n  });\n}\n\nexport default function Home() {\n  const user = useRouteData<typeof routeData>();\n  const [, { Form }] = createServerAction$((f: FormData, { request }) =>\n    logout(request)\n  );\n\n  return (\n    <main class=\"w-full p-4 space-y-2\">\n      <h1 class=\"font-bold text-3xl\">Hello {user()?.username}</h1>\n      <h3 class=\"font-bold text-xl\">Message board</h3>\n      <Form>\n        <button name=\"logout\" type=\"submit\">\n          Logout\n        </button>\n      </Form>\n    </main>\n  );\n}\n","start":1675681821937,"end":1675681821937},{"name":"solid-start-file-system-router","result":"import \"solid-start/data\";\nimport { createRouteData } from \"solid-start/data\";\nimport server$ from \"solid-start/server\";\nimport { redirect } from \"solid-start/server\";\nimport { getUser, logout } from \"~/db/session\";\nconst $$server_module0 = server$.createHandler(async function $$serverHandler0(_, {\n  request\n}) {\n  const $$ctx = this;\n  const user = await getUser(request);\n  if (!user) {\n    throw redirect(\"/login\");\n  }\n  return user;\n}, \"/_m/src/routes/index.tsx/0/routeData\", true);\nserver$.registerHandler(\"/_m/src/routes/index.tsx/0/routeData\", $$server_module0);\nexport function routeData() {\n  return createRouteData($$server_module0);\n}\nconst $$server_module1 = server$.createHandler(async function $$serverHandler1(f, {\n  request\n}) {\n  const $$ctx = this;\n  return logout(request);\n}, \"/_m/src/routes/index.tsx/1/fn\", true);\nserver$.registerHandler(\"/_m/src/routes/index.tsx/1/fn\", $$server_module1);","start":1675681821937,"end":1675681821944,"order":"pre"},{"name":"solid","result":"import \"solid-start/data\";\nimport { createRouteData } from \"solid-start/data\";\nimport server$ from \"solid-start/server\";\nimport { redirect } from \"solid-start/server\";\nimport { getUser, logout } from \"~/db/session\";\nconst $$server_module0 = server$.createHandler(async function $$serverHandler0(_, {\n  request\n}) {\n  const $$ctx = this;\n  const user = await getUser(request);\n  if (!user) {\n    throw redirect(\"/login\");\n  }\n  return user;\n}, \"/_m/src/routes/index.tsx/0/routeData\", true);\nserver$.registerHandler(\"/_m/src/routes/index.tsx/0/routeData\", $$server_module0);\nexport function routeData() {\n  return createRouteData($$server_module0);\n}\nconst $$server_module1 = server$.createHandler(async function $$serverHandler1(f, {\n  request\n}) {\n  const $$ctx = this;\n  return logout(request);\n}, \"/_m/src/routes/index.tsx/1/fn\", true);\nserver$.registerHandler(\"/_m/src/routes/index.tsx/1/fn\", $$server_module1);","start":1675681821944,"end":1675681821947,"order":"pre"},{"name":"vite:define","result":"import \"solid-start/data\";\nimport { createRouteData } from \"solid-start/data\";\nimport server$ from \"solid-start/server\";\nimport { redirect } from \"solid-start/server\";\nimport { getUser, logout } from \"~/db/session\";\nconst $$server_module0 = server$.createHandler(async function $$serverHandler0(_, {\n  request\n}) {\n  const $$ctx = this;\n  const user = await getUser(request);\n  if (!user) {\n    throw redirect(\"/login\");\n  }\n  return user;\n}, \"/_m/src/routes/index.tsx/0/routeData\", true);\nserver$.registerHandler(\"/_m/src/routes/index.tsx/0/routeData\", $$server_module0);\nexport function routeData() {\n  return createRouteData($$server_module0);\n}\nconst $$server_module1 = server$.createHandler(async function $$serverHandler1(f, {\n  request\n}) {\n  const $$ctx = this;\n  return logout(request);\n}, \"/_m/src/routes/index.tsx/1/fn\", true);\nserver$.registerHandler(\"/_m/src/routes/index.tsx/1/fn\", $$server_module1);","start":1675681821947,"end":1675681821947,"order":"normal"},{"name":"vite:import-analysis","result":"import \"/node_modules/solid-start/data/index.ts\";\nimport { createRouteData } from \"/node_modules/solid-start/data/index.ts\";\nimport server$ from \"/node_modules/solid-start/server/server.ts\";\nimport { redirect } from \"/node_modules/solid-start/server/server.ts\";\nimport { getUser, logout } from \"/src/db/session.ts\";\nconst $$server_module0 = server$.createHandler(async function $$serverHandler0(_, {\n  request\n}) {\n  const $$ctx = this;\n  const user = await getUser(request);\n  if (!user) {\n    throw redirect(\"/login\");\n  }\n  return user;\n}, \"/_m/src/routes/index.tsx/0/routeData\", true);\nserver$.registerHandler(\"/_m/src/routes/index.tsx/0/routeData\", $$server_module0);\nexport function routeData() {\n  return createRouteData($$server_module0);\n}\nconst $$server_module1 = server$.createHandler(async function $$serverHandler1(f, {\n  request\n}) {\n  const $$ctx = this;\n  return logout(request);\n}, \"/_m/src/routes/index.tsx/1/fn\", true);\nserver$.registerHandler(\"/_m/src/routes/index.tsx/1/fn\", $$server_module1);","start":1675681821947,"end":1675681821950,"order":"normal"}]}
